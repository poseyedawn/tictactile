@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Light Theme (Default) */
  :root {
    /* Base Colors */
    --background: 210 40% 98%; /* Light blue-gray */
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: 222 47% 11%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;

    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;

    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 222 47% 11%;

    --radius: 0.5rem;

    /* Sidebar */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5% 26%;
    --sidebar-primary: 240 6% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 5% 96%;
    --sidebar-accent-foreground: 240 6% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217 91% 60%;

    /* Game-specific theme variables */
    --game-background: 210 40% 98%;
    --player-color: 222 100% 60%;
    --ai-color: 340 100% 60%;
    --grid-border: 214 32% 91%;
    --grid-hover: 210 40% 96%;
    --win-line: 130 100% 60%;
    --draw-color: 40 100% 60%;

    /* Token glow colors */
    --player-glow: 222 100% 60% / 0.4;
    --ai-glow: 340 100% 60% / 0.4;
    
    /* UI elements */
    --button-bg: 222 47% 11%;
    --button-text: 210 40% 98%;
    --button-hover: 222 47% 20%;
    --control-bg: 210 40% 96%;

    /* Retro Pixel Theme (Unlockable) */
    --retro-background: 35 30% 90%; /* Soft, warm beige */
    --retro-foreground: 35 80% 20%; /* Dark brown */
    --retro-player-color: 30 90% 50%; /* Warm orange */
    --retro-ai-color: 350 80% 40%; /* Muted brick red */
    --retro-grid-border: 35 80% 20%; /* Dark brown border */
    --retro-win-line: 50 90% 40%; /* Golden brown */
    --retro-glow: 35 80% 20% / 0.3; /* Soft, warm glow */
  }

  /* Dark Theme */
  .dark {
    /* Base Colors */
    --background: 222 47% 11%; /* Dark blue-gray */
    --foreground: 210 40% 98%;

    --card: 222 47% 11%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 11%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222 47% 11%;

    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;

    --accent: 217 33% 17%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 213 27% 84%;
    
    /* Sidebar */
    --sidebar-background: 240 6% 10%;
    --sidebar-foreground: 240 5% 96%;
    --sidebar-primary: 224 76% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 4% 16%;
    --sidebar-accent-foreground: 240 5% 96%;
    --sidebar-border: 240 4% 16%;
    --sidebar-ring: 217 91% 60%;
    
    /* Game-specific theme variables */
    --game-background: 222 47% 11%;
    --player-color: 222 100% 65%;
    --ai-color: 340 100% 65%;
    --grid-border: 217 33% 25%;
    --grid-hover: 217 33% 20%;
    --win-line: 130 100% 65%;
    --draw-color: 40 100% 65%;

    /* Token glow colors */
    --player-glow: 222 100% 65% / 0.6;
    --ai-glow: 340 100% 65% / 0.6;
    
    /* UI elements */
    --button-bg: 210 40% 98%;
    --button-text: 222 47% 11%;
    --button-hover: 210 40% 90%;
    --control-bg: 217 33% 17%;
  }

  /* Neon Theme */
  .neon {
    /* Base Colors */
    --background: 240 10% 4%; /* Almost black */
    --foreground: 0 0% 98%;

    --card: 240 10% 4%;
    --card-foreground: 0 0% 98%;

    --popover: 240 10% 4%;
    --popover-foreground: 0 0% 98%;

    --primary: 120 100% 50%; /* Bright green */
    --primary-foreground: 240 10% 4%;

    --secondary: 240 10% 14%;
    --secondary-foreground: 0 0% 98%;

    --muted: 240 10% 14%;
    --muted-foreground: 240 5% 65%;

    --accent: 300 100% 50%; /* Bright pink */
    --accent-foreground: 0 0% 98%;

    --destructive: 0 100% 50%; /* Bright red */
    --destructive-foreground: 0 0% 98%;

    --border: 240 10% 14%;
    --input: 240 10% 14%;
    --ring: 240 5% 84%;
    
    /* Game-specific theme variables */
    --game-background: 240 10% 4%;
    --player-color: 120 100% 65%; /* Neon green */
    --ai-color: 300 100% 65%; /* Neon pink */
    --grid-border: 180 100% 50%; /* Cyan */
    --grid-hover: 180 100% 30%;
    --win-line: 60 100% 60%; /* Neon yellow */
    --draw-color: 30 100% 60%; /* Neon orange */

    /* Token glow colors */
    --player-glow: 120 100% 65% / 0.8;
    --ai-glow: 300 100% 65% / 0.8;
    
    /* UI elements */
    --button-bg: 180 100% 50%;
    --button-text: 240 10% 4%;
    --button-hover: 180 100% 70%;
    --control-bg: 240 10% 14%;
  }
  
  /* Variables for unlockable themes (defined but not active until unlocked) */
  :root {
    /* Retro Pixel Theme (Unlockable) */
    --retro-background: 35 30% 90%;
    --retro-foreground: 35 80% 20%;
    --retro-player-color: 200 100% 30%;
    --retro-ai-color: 0 100% 40%;
    --retro-grid-border: 35 80% 20%;
    --retro-win-line: 130 90% 30%;
    
    /* Watercolor Theme (Unlockable) */
    --watercolor-background: 210 30% 95%;
    --watercolor-player-color: 200 70% 60%;
    --watercolor-ai-color: 340 70% 60%;
    --watercolor-grid-border: 210 20% 80%;
    --watercolor-win-line: 130 50% 60%;
  }

  .retro {
    /* Retro Theme Specific Styles */
    --background: var(--retro-background);
    --foreground: var(--retro-foreground);
    --player-color: var(--retro-player-color);
    --ai-color: var(--retro-ai-color);
    --grid-border: var(--retro-grid-border);
    --win-line: var(--retro-win-line);
    --player-glow: var(--retro-glow);
    --ai-glow: var(--retro-glow);
  }

  /* Add Water Theme */
  .water {
    --background: 207 100% 94%; /* Ocean sky blue */
    --foreground: 222 94% 10%;
    --player-color: 207 100% 52%; /* Deep blue */
    --ai-color: 191 97% 69%; /* Aqua-green for O/pufferfish */
    --grid-border: 210 88% 80%;
    --grid-hover: 208 100% 89%;
    --win-line: 191 97% 37%;
    --draw-color: 207 58% 74%;

    --player-glow: 220 100% 61% / 0.5;
    --ai-glow: 191 97% 62% / 0.5;

    --button-bg: 207 89% 62%;
    --button-text: 210 40% 98%;
    --button-hover: 207 100% 43%;
    --control-bg: 203 100% 96%;
  }
  /* Water background with gentle ocean-blue gradient and noise */
  .water-bg {
    background: radial-gradient(circle at 60% 40%, #b6e6fc 0%, #8fd3f4 50%, #1976d2 100%);
    position: relative;
    overflow: hidden;
  }

  .cell-water {
    background: rgba(232,246,255,0.96);
    box-shadow: 0 0 0 2px #67b5de33 inset, 0 6px 24px -8px #6ed1fc44;
    border-color: #67b5de !important;
  }
  .token-water-x,
  .token-water-o {
    stroke-width: 2.2 !important; /* Harmonize outlines */
    stroke: #1976d2 !important;
  }
  .token-water-x {
    color: #1976d2;
    filter: drop-shadow(0 0 4px #86cefa88);
  }
  .token-water-o {
    /* Keep pufferfish glow and add outline for match */
    filter: drop-shadow(0 0 4px #82e1f7cc);
    stroke: #1976d2 !important;
    stroke-width: 2.2 !important;
  }

  /* Add Fire Theme */
  .fire {
    --background: 240 10% 4%; /* Override: pure black background */
    --foreground: 20 68% 23%;
    --player-color: 19 97% 54%;
    --ai-color: 26 100% 60%;
    --grid-border: 28 78% 62%;
    --grid-hover: 26 100% 90%;
    --win-line: 13 100% 56%;
    --draw-color: 27 91% 85%;

    --player-glow: 18 100% 70% / 0.58;
    --ai-glow: 26 100% 65% / 0.58;

    --button-bg: 18 80% 44%;
    --button-text: 32 100% 97%;
    --button-hover: 13 100% 40%;
    --control-bg: 40 100% 98%;
  }
  .fire-bg {
    background: #000 !important;
    position: relative;
    overflow: hidden;
  }
  .cell-fire {
    background: linear-gradient(134deg, #ffd69a 70%, #ffdbb7 100%);
    box-shadow: 0 0 0 2px #fe610188 inset, 0 8px 32px -12px #fe610177;
    border-color: #fe6101 !important;
  }
  .token-fire-x {
    filter: drop-shadow(0 0 8px #dd6017bb);
  }
  .token-fire-o {
    color: #fe6101 !important;
    filter: drop-shadow(0 0 12px #ffd07b99);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
  
  /* Game-specific base styles */
  .board-container {
    max-width: 400px;
    aspect-ratio: 1/1;
  }
  
  .cell-content {
    transition: all 0.2s ease-in-out;
  }
  
  .board-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: 0.5rem;
    aspect-ratio: 1/1;
  }
  
  .win-animation {
    animation: bounce-in 0.5s ease-out;
  }
  
  .win-line {
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
  }
  
  .theme-transition {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  }
  
  /* Token styles */
  .token {
    transition: transform 0.2s ease-in-out;
  }
  
  .token-x {
    @apply text-[hsl(var(--player-color))];
  }
  
  .token-o {
    @apply text-[hsl(var(--ai-color))];
  }
  
  /* Glow effects */
  .glow-x {
    filter: drop-shadow(0 0 8px hsl(var(--player-glow)));
  }
  
  .glow-o {
    filter: drop-shadow(0 0 8px hsl(var(--ai-glow)));
  }
  
  /* Thinking animation for AI */
  .thinking {
    animation: pulse 1.5s infinite ease-in-out;
  }
  
  /* Confetti animation */
  .confetti-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
    overflow: hidden;
  }
  
  .confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    opacity: 0.7;
  }
}
